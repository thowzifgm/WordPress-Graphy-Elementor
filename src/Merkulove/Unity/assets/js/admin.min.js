/**
 * Graphy for Elementor
 * Creates modern and stylish Elementor widgets to display awesome charts and graphs.
 *
 * @encoding        UTF-8
 * @version         1.2.6
 * @contributors    Abdullah Thowzif Hameed (thowzif@live.com)
 **/
!function(e){"use strict";e(document).ready((function(){let t=window.mdpGraphyElementorUnity;e(".mdc-drawer__header > a.mdp-plugin-title").on("click",(function(t){t.preventDefault(),e("html, body").animate({scrollTop:0},500)})),e("#mdp-subscribe").on("click",(function(s){s.preventDefault();let a=e("#mdp-subscribe-mail"),n=e("#mdp-subscribe-name"),o=a.parent().data("mdc-index");if(a.val().length>0&&window.MerkulovMaterial[o].valid){const s=document.querySelector(".mdp-subscribe-form-message");n.prop("disabled",!0),a.prop("disabled",!0),e("#mdp-subscribe").prop("disabled",!0),e.ajax({type:"GET",url:t.restBase+"graphy-elementor/v2/subscribe",crossDomain:!0,data:`name=${n.val()}&mail=${a.val()}`,success:function(e){(e=JSON.parse(e)).status?(s.classList.add("mdp-subscribe-form-message-success"),s.innerHTML=s.dataset.success,setTimeout((function(){s.style.display="none"}),7500)):(s.classList.add("mdp-subscribe-form-message-error"),s.innerHTML=s.dataset.error),s.style.display="block",setTimeout((function(){s.style.display="none"}),7500)},error:function(t){s.style.display="block",s.classList.add("mdp-subscribe-form-message-error"),s.innerHTML=s.dataset.warn,e("#mdp-subscribe-name").prop("disabled",!1),e("#mdp-subscribe-mail").prop("disabled",!1),e("#mdp-subscribe").prop("disabled",!1),setTimeout((function(){s.style.display="none"}),7500)}})}else window.MerkulovMaterial[o].valid=!1}));let s=e("#mdp-updates-btn");s.on("click",(function(a){a.preventDefault(),s.attr("disabled",!0).addClass("mdp-spin").find(".material-icons").text("refresh");let n={action:"check_updates_graphy_elementor",nonce:t.nonce,checkUpdates:!0};e.post(t.ajaxURL,n,(function(e){e?(console.info("Latest version information updated."),location.reload()):console.warn(e)}),"json").fail((function(e){console.error(e),alert("Looks like an Error has occurred. Please try again later.")})).always((function(){s.attr("disabled",!1).removeClass("mdp-spin").find(".material-icons").text("autorenew")}))})),function(){let t=e("#mdp_custom_css_fld");if(!t.length)return;let s,a=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};a.codemirror=_.extend({},a.codemirror,{indentUnit:2,tabSize:2,mode:"css"}),s=wp.codeEditor.initialize("mdp_custom_css_fld",a),s.codemirror.on("change",(function(e){s.codemirror.save(),t.change()}))}();let a=e(".mdp-chosen.chosen-select");a.length>0&&a.chosen({width:"100%",search_contains:!0,disable_search_threshold:7,inherit_select_classes:!0,no_results_text:"Oops, nothing found"}),e(".mdp-layout .mdp-nav-dropdown a").on("click",(function(t){t.preventDefault();let s=t.target,a=t.target.parentElement;"IMG"!==t.target.tagName&&(s=t.target.querySelector("img"),a=t.target);const n=a.getAttribute("data-val"),o=s.alt,r=e(".mdp-layout button img");r.attr("src",r.attr("src").replace(/(.*)\/.*(\.svg$)/i,"$1/"+n+"$2")),r.attr("alt",o),e(this).closest("td").find("input").val(n).change(),setTimeout((function(){e(".mdp-layout").removeClass("mdp-open")}),100),e(".mdp-layout .mdp-nav-dropdown a").removeClass("mdp-active"),e(this).addClass("mdp-active")}))}))}(jQuery);